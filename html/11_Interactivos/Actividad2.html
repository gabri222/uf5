<!DOCTYPE html>
<html>
<head>
    <title>Buscador de Smartphones</title>
    <style>
        .autocomplete {
            position: relative;
            display: inline-block;
        }
    </style>
</head>
<body>
    <h1>Buscador de Smartphones</h1>
    <form action="">
        <div class="autocomplete">
            <input id="myInput" type="text" name="marca" placeholder="Marca">
        </div>
        <select name="precio">
            <option value="">Selecciona un rango de precios</option>
            <option value="0-100">0 - 100</option>
            <option value="100-200">100 - 200</option>
            <option value="200-300">200 - 300</option>
            <option value="300-400">300 - 400</option>
            <option value="400+">400+</option>
        </select>
        <input type="submit" value="Buscar">
    </form>

    <script>
        function autocomplete(inp, arr) {
            /* La función de autocompletar toma dos argumentos,
            el elemento de campo de texto y una matriz de posibles valores autocompletados: */
            var currentFocus;
            /* Ejecuta una función cuando alguien escribe en el campo de texto: */
            inp.addEventListener("input", function(e) {
                var a, b, i, val = this.value;
                /* Cerrar cualquier lista ya abierta de valores autocompletados */
                closeAllLists();
                if (!val) { return false;}
                currentFocus = -1;
                /* Crea un elemento DIV que contendrá los elementos (valores): */
                a = document.createElement("DIV");
                a.setAttribute("id", this.id + "autocomplete-list");
                a.setAttribute("class", "autocomplete-items");
                /* Añade el elemento DIV como hijo del contenedor de autocompletar: */
                this.parentNode.appendChild(a);
                /* Para cada elemento de la matriz... */
                for (i = 0; i < arr.length; i++) {
                    /* Comprueba si el elemento comienza con las mismas letras que el valor del campo de texto: */
                    if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                        /* Crea un elemento DIV para cada elemento coincidente: */
                        b = document.createElement("DIV");
                        /* Haz que las letras coincidentes estén en negrita: */
                        b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
                        b.innerHTML += arr[i].substr(val.length);
                        /* Inserta un campo de entrada que contendrá el valor del elemento de matriz actual: */
                        b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
                        /* Ejecuta una función cuando alguien hace clic en el valor del elemento (elemento DIV): */
                        b.addEventListener("click", function(e) {
                            /* Inserta el valor para el campo de texto de autocompletar: */
                            inp.value = this.getElementsByTagName("input")[0].value;
                            /* Cierra la lista de valores autocompletados,
                            (o cualquier otra lista abierta de valores autocompletados: */
                            closeAllLists();
                        });
                        a.appendChild(b);
                    }
                }
            });
            /* Ejecuta una función presiona una tecla en el teclado: */
            inp.addEventListener("keydown", function(e) {
                var x = document.getElementById(this.id + "autocomplete-list");
                if (x) x = x.getElementsByTagName("div");
                if (e.keyCode == 40) {
                    /* Si se presiona la tecla de flecha ABAJO,
                    aumenta la variable currentFocus: */
                    currentFocus++;
                    /* y haz que el elemento actual sea más visible: */
                    addActive(x);
                } else if (e.keyCode == 38) { //up
                    /* Si se presiona la tecla de flecha ARRIBA,
                    disminuye la variable currentFocus: */
                    currentFocus--;
                    /* y haz que el elemento actual sea más visible: */
                    addActive(x);
                } else if (e.keyCode == 13) {
                    /* Si se presiona la tecla ENTER, evita que se envíe el formulario, */
                    e.preventDefault();
                    if (currentFocus > -1) {
                        /* y simula un clic en el elemento "activo": */
                        if (x) x[currentFocus].click();
                    }
                }
            });
            function addActive(x) {
                /* una función para clasificar un elemento como "activo": */
                if (!x) return false;
                /* comienza eliminando la clase "active" en todos los elementos: */
                removeActive(x);
                if (currentFocus >= x.length) currentFocus = 0;
                if (currentFocus < 0) currentFocus = (x.length - 1);
                /* agrega la clase "autocomplete-active": */
                x[currentFocus].classList.add("autocomplete-active");
            }
            function removeActive(x) {
                /* una función para eliminar la clase "active" de todos los elementos de autocompletar: */
                for (var i = 0; i < x.length; i++) {
                    x[i].classList.remove("autocomplete-active");
                }
            }
            function closeAllLists(elmnt) {
                /* cierra todas las listas de autocompletar en el documento,
                excepto la que pasó como argumento: */
                var x = document.getElementsByClassName("autocomplete-items");
                for (var i = 0; i < x.length; i++) {
                    if (elmnt != x[i] && elmnt != inp) {
                        x[i].parentNode.removeChild(x[i]);
                    }
                }
            }
            /* ejecuta una función cuando alguien hace clic en el documento: */
            document.addEventListener("click", function (e) {
                closeAllLists(e.target);
            });
        }

        /* Una matriz que contiene todas las marcas conocidas: */
        var brands = ["Apple", "Samsung", "Huawei", "Xiaomi", "OnePlus", "Google", "Nokia", "Sony", "LG", "Motorola"];
        /* Inicia la función de autocompletar en el campo de texto "myInput": */
        autocomplete(document.getElementById("myInput"), brands);
    </script>
</body>
</html>
